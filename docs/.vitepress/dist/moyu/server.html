<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务器常用技巧 | 干饭人</title>
    <meta name="description" content="服务器常见的一些技巧">
    <link rel="stylesheet" href="/assets/style.6d794511.css">
    <link rel="modulepreload" href="/assets/app.c9acc767.js">
    <link rel="modulepreload" href="/assets/moyu_server.md.0582b296.lean.js">
    
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3171857_jvphawt6f2m.css">
  <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0781e96341b7bede1a9b132b08a790f1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
  <meta name="twitter:title" content="服务器常用技巧 | 干饭人">
  <meta property="og:title" content="服务器常用技巧 | 干饭人">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="h-16 w-full"></div><div class="w-full h-16 bg-white shadow-lg shadow-gray-100 px-8 lg:px-14 flex items-center justify-start fixed top-0 left-0 z-40"><div class="flex-1 relative flex items-center lg:hidden"><button class="absolute left-0"><i class="iconfont large transition-all icon-menu"></i></button></div><img src="/logo.svg" alt="logo" class="h-10"><!----><div class="flex-1"></div><ul class="hidden lg:flex cursor-pointer"><!--[--><li class="px-4 h-16 text-sm flex items-center"><i class="iconfont icon-home mr-1"></i><span>首页</span></li><li class="px-4 h-16 text-sm flex items-center active"><i class="iconfont icon-bookmark mr-1"></i><span>文章</span></li><li class="px-4 h-16 text-sm flex items-center"><i class="iconfont icon-heart-o mr-1"></i><span>关于我</span></li><li class="px-4 h-16 text-sm flex items-center"><i class="iconfont icon-github big mr-1"></i><!----></li><!--]--></ul></div><!----><!----><!--]--><div class="container mx-auto py-10 grid grid-cols-1 lg:grid-cols-4 lg:gap-8"><div class="prose sm:bg-white shadow-lg shadow-gray-100 p-8 sm:rounded-xl col-span-3"><div style="position:relative;"><div><h1 id="服务器知识汇总" tabindex="-1">服务器知识汇总 <a class="header-anchor" href="#服务器知识汇总" aria-hidden="true">#</a></h1><h2 id="ssh" tabindex="-1">SSH <a class="header-anchor" href="#ssh" aria-hidden="true">#</a></h2><p>在开发过程中可能会用到的ssh技巧</p><h3 id="免密登录" tabindex="-1">免密登录 <a class="header-anchor" href="#免密登录" aria-hidden="true">#</a></h3><p>免密登录：客户端A（以下简称A）免密访问服务端B（以下简称B）</p><ol><li>在A生成一对密钥，基于空口令生成ssh密钥</li></ol><div class="language-bash line-numbers-mode"><pre><code>ssh-keygen -t rsa -P <span class="token string">&#39;&#39;</span> -f ~/.ssh/id_rsa
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数说明：</p><ul><li>-t 加密算法类型，这里是使用rsa算法</li><li>-P 指定私钥的密码，不需要可以不指定</li><li>-f 指定生成秘钥对保持的位置 打印信息：</li></ul><div class="language-bash line-numbers-mode"><pre><code>Your identification has been saved <span class="token keyword">in</span> /Users/xxx/.ssh/id_rsa
Your public key has been saved <span class="token keyword">in</span> /Users/xxx/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:xxxx+xx/xx xxx@xxxs-MacBook-Air.local
The key&#39;s randomart image is:
+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+
<span class="token operator">|</span>     <span class="token punctuation">..</span>.*.o.     <span class="token operator">|</span>
<span class="token operator">|</span>    o  ++B.o.    <span class="token operator">|</span>
<span class="token operator">|</span>   o <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> +O.+    <span class="token operator">|</span>
<span class="token operator">|</span>    + o .<span class="token operator">=</span>.* +   <span class="token operator">|</span>
<span class="token operator">|</span>     +  A.* o o  <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token builtin class-name">.</span> .o o<span class="token punctuation">..</span>. <span class="token operator">|</span>
<span class="token operator">|</span>           <span class="token operator">=</span> *o  <span class="token operator">|</span>
<span class="token operator">|</span>          o X.o  <span class="token operator">|</span>
<span class="token operator">|</span>        B<span class="token punctuation">..</span><span class="token operator">=</span> *o. <span class="token operator">|</span>
+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li>使用<code>ssh-copy-id</code>将A的公钥发给B（假设IP为192.168.1.1）</li></ol><div class="language-"><pre><code>ssh-copy-id root@192.168.1.1
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>错误处理：执行<code>ssh-copy-id</code>卡住，可能是由于B主机上已经存在A信息，删除B的<code>~/.ssh/authroized_keys</code>重新执行命令</p><ol start="3"><li>运行<code>ssh root@192.168.1.1</code>, 免密登录成功</li></ol><h3 id="远程拷贝-scp" tabindex="-1">远程拷贝 scp <a class="header-anchor" href="#远程拷贝-scp" aria-hidden="true">#</a></h3><p>scp工具，基于ssh远程安全登录的，可以将主机A上的文件或目录拷贝给主机B并且改名字，也可以将主机B上的文件或目录下载到主机A中，同时也支持修改文件名。</p><ul><li><p><strong>远程拷贝文件</strong></p><p>将A上的/etc/profile文件拷贝到B根目录下</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">scp</span> /etc/profile root@192.168.1.1:/
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将A上的/etc/profile文件拷贝到B的根目录下,并改名为profile.txt</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">scp</span> /etc/profile root@192.168.1.1:/profile.txt
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p><strong>远程拷贝目录</strong></p><p>将A上的/bin目录拷贝到B根目录下</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">scp</span> -r /bin root@A:/home/ （-r 表示递归）
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p><strong>下载文件到本地</strong></p><p>将B上的/profile下载到本地并改名为profile.txt</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">scp</span> root@192.168.1.1:/profile ./profile.txt
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p><strong>下载目录到本地</strong></p><p>将B上的/bin下载到本地并改名为bin.bak</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">scp</span> -r root@192.168.1.1:/home/bin ./bin.bak
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></div></div></div><div class="w-full mt-8 lg:mt-0"><div class="bg-white shadow-lg shadow-gray-100 p-5 mb-8 w-full rounded-xl hidden lg:block"><div class="text-base text-gray-700 font-thin">文章导航</div><div class="mt-4"><div class="mb-3"><a href="#服务器常用技巧">服务器常用技巧</a></div><div class=""><ul class="text-sm"><!--[--><!--[--><li><a href="#SSH" class="h-8 block ml-2 text-gray-700">SSH</a></li><!--]--><!--[--><li><a href="#免密登录" class="h-8 block ml-4 text-xs text-gray-600">免密登录</a></li><!--]--><!--[--><li><a href="#远程拷贝-scp" class="h-8 block ml-4 text-xs text-gray-600">远程拷贝 scp</a></li><!--]--><!--]--></ul></div></div></div><div class="sm:rounded-xl bg-white shadow-lg shadow-gray-100 p-5 mb-8 w-full"><div class="text-base text-gray-700 font-thin">专栏</div><div class="mt-4"><ul><!--[--><li class="mb-2 cursor-pointer"><span class="text-gray-700 font-bold">前端修仙</span></li><li class="mb-2 cursor-pointer"><span class="text-gray-700 font-bold">摸鱼日志</span></li><li class="mb-2 cursor-pointer"><span class="text-gray-700 font-bold">奇思妙想</span></li><!--]--></ul></div></div><div class="sm:rounded-xl bg-white shadow-lg shadow-gray-100 p-5 mb-8 w-full"><div class="text-base text-gray-700 font-thin">最新文章</div><div class="mt-4"><ul><!--[--><li class="mb-2 text-sm"><a href="/moyu/server.html" class="flex items-center" title="服务器常用技巧"><span class="text-gray-700 flex-1 truncate">服务器常用技巧</span><span class="ml-2 text-xs text-gray-500">今天</span></a></li><!--]--></ul></div></div></div></div><div class="container mx-auto text-center py-14 text-xs text-gray-400"><a href="http://www.beian.gov.cn/" class="block my-2">Copyright © 2022 · 粤ICP备19008991号-3</a><p>Developed by Yaojunluo</p><p class="block mt-2">版本 0.0.1</p></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about_index.md\":\"9b35bdde\",\"code_index.md\":\"faded420\",\"guide_index.md\":\"cf913ce7\",\"idea_index.md\":\"b98a7f12\",\"index.md\":\"95af1213\",\"moyu_index.md\":\"c125b2e3\",\"moyu_server.md\":\"0582b296\"}")</script>
    <script type="module" async src="/assets/app.c9acc767.js"></script>
    
  </body>
</html>